#+TITLE: XenServer Admin Scripts
These are works in progress for performing common XenServer CLI tasks. They are somewhat site-specific and have some known bugs.

* Assumptions
  - name labels are unique among each type of object (VM, SR, network...); exception is local storage
  - name labels of default templates have not been changed from original values
  - each host has one local storage repository with name label 'Local storage' (only relevant if local storage is used)
  - host name label is same as hostname

* Environment variables
  These are used to set the XE_EXTRA_ARGS environment variable if it is not set:
  - XE_SERVER
  - XE_PORT
  - XE_USER
  - XE_PASSWORD

* Reasons
  - common multi-step tasks are tedious with =xe=
  - name labels are more user-friendly than UUIDs
  - =vm-uninstall= leaves orphan VDIs
  ...to be completed...

* Remaining work
** xs-* scripts [1/6]
   - [ ] set arg vars to avoid env vars; always initialize vars!
   - [ ] NFS mount scripts from XenGateway
   - [X] default to localhost for xs-vm-provision-local
   - [ ] =vm_host()= is a mess
   - [ ] vm-vnc-toggle for PV
   - [ ] make VM a positional arg for xs-vm-*
*** xs-vm-provision-local
    - [ ] rename to xs-vm-provision
    - [ ] support shared storage (default to host's/pool's default)
*** xs-vif-create/destroy
    - [ ] automatically plug/unplug VIFs on running VMs
*** xs-vm-install-from-template
    - [ ] use =xs-functions=
    - [ ] cli bug?
    - [X] set VCPUs
    - [ ] HVM-boot-params for Other install media
    - [ ] correct default PV-args for RHEL/CentOS vs. Debian/Ubuntu
    - [ ] INSTALL_REPO_URL_BASE as optional environment variable
    - [ ] prompt for PV-args with default string shown
    - [ ] prompt with default in case of only one option
    - [ ] PV text/vnc console connection option
    - [ ] interactive bugs
      + [ ] empty string for dist
      + [ ] empty string for arch
      + [ ] empty string for version?
*** xs-vm-xenstore-config
    - [ ] use name label as default hostname
